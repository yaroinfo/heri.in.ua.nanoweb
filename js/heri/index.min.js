const LS_SETTINGS_DARKMODE="darkMode";function openGalleryModal(e){const t=document.getElementById("galleryModal"),n=new bootstrap.Modal(t);t.addEventListener("shown.bs.modal",(function(){const e=t.querySelector(".carousel-control-next");e||e.focus()})),n.show();var r=document.querySelector("#galleryCarousel");new bootstrap.Carousel(r).to(e)}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("mainNav"),t=document.querySelectorAll('[data-nw-nav="active"]'),n=document.head.querySelector("base");t.forEach((t=>{const r=`${t.getAttribute("href").substring(n.getAttribute("href").length)}`,o=e.querySelector(`[href="${t.getAttribute("href")}"], [href="${r}"]`);o&&o.classList.add("active")})),e.querySelectorAll(".nav-link.active").forEach((t=>{let n=t.parentElement;for(;n&&n!==e;){if("LI"===n.tagName){const e=n.querySelector("a");e&&e.classList.add("active")}n=n.parentElement}}))})),(()=>{const e=new URLSearchParams(window.location.search).get("date");if(e){document.querySelectorAll(`[data-date]:not([data-date^="${e}"])`).forEach((e=>e.closest("[data-id]").classList.add("d-none")))}})(),(()=>{function e(e){}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("section.gallery").forEach((t=>{t.querySelectorAll("figure img").forEach((t=>{t.addEventListener("click",e)}))}))}))})(),(()=>{window.searchTextValue=null,window.searchResults=[],window.search=async function(e){if("string"==typeof e&&e.length<2)return[];if(window.searchTextValue===e)return window.searchResults;window.searchTextValue=e;const t=Date.now(),n=e.toLowerCase().split(/\s+/),r=await fetch("/search.json",{cache:"reload"}),o=(await r.json()).version||"",a=await fetch(`/search.txt?ver=${o}`,{method:"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}}),c=a.headers.get("Content-Encoding"),d=a.headers.get("Content-Length"),s=`search.txt: ${((Date.now()-t)/1e3).toFixed(2)}sec | ${(d/1024).toFixed(1)}Kb | ${o.slice(0,4)}..${o.slice(-4)}`;c&&c.includes("gzip")?console.log(s):console.error(s);const l=(await a.text()).trim().split("\n\n").map((e=>e.split("\n"))),i=l.map((([e,t,r,o,a],c)=>{r=JSON.parse(r),a=JSON.parse(a);const d=((e,t)=>{const n=t.toLowerCase();let r=0,o=-1;return e.forEach((e=>{const t=n.indexOf(e);-1!==t&&(r||(r=1),r+=e.length,-1!==o&&(r+=e.length*(t-o)),o=t)})),r})(n,t+" "+r+" "+a);return{uri:JSON.parse(e),title:JSON.parse(t),desc:r,image:JSON.parse(o),body:a,score:d}})).filter((e=>e.score>0));return i.sort(((e,t)=>t.score-e.score)),i};const e=document.getElementById("searchInput"),t=document.getElementById("searchResults"),n=document.getElementById("searchResultTemplate");if(!e||!t||!n)return;t.addEventListener("keydown",(function(e){const n=Array.from(t.children),r=document.activeElement;if(n.includes(r)){if("Tab"===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();const n=Array.from(t.children),r=document.activeElement,o=n.indexOf(r);let a=0;"Tab"===e.key||"ArrowDown"===e.key?a=o+1<n.length?o+1:0:("ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey)&&(a=o-1>=0?o-1:n.length-1),n[a].focus()}if("Enter"===e.key){const e=r.querySelector("[data-url]");e&&e.click()}}})),e.addEventListener("keyup",(function(){t.innerHTML="",window.search(e.value).then((e=>{window.searchResults=e,e.forEach((e=>{const r=n.content.cloneNode(!0),o=r.querySelectorAll("[data-img]");o.length&&o.forEach((t=>t.setAttribute("src",e.image)));const a=r.querySelectorAll("[data-title]");a.length&&a.forEach((t=>t.textContent=e.title));const c=r.querySelectorAll("[data-desc]");c.length&&c.forEach((t=>t.textContent=e.desc));const d=r.querySelectorAll("[data-url]");d&&d.forEach((t=>t.setAttribute("href",e.uri))),t.appendChild(r);const s=t.lastElementChild;s.setAttribute("tabindex","0"),s.setAttribute("role","button")}))}))}));document.getElementById("searchModal").addEventListener("shown.bs.modal",(()=>e.focus()))})(),document.addEventListener("keydown",(e=>{if((e.metaKey||e.ctrlKey)&&"k"===e.key){e.preventDefault();const t=document.querySelector('[data-bs-target="#searchModal"]');t&&t.click()}})),(()=>{const e=e=>{localStorage.setItem("darkMode",e),document.dispatchEvent(new Event("darkModeChange"));const t=null===e?window.matchMedia("(prefers-color-scheme: dark)").matches:parseInt(e);document.documentElement.setAttribute("data-bs-theme",t?"dark":"light")},t=()=>{let e=localStorage.getItem("darkMode")||null;return null===e&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e=1),parseInt(e)};document.addEventListener("DOMContentLoaded",(()=>{const n=document.getElementById("settingsDarkMode");n&&(n.checked=1===t(),e(n.checked?1:0),n.addEventListener("change",(t=>{e(t.currentTarget.checked?1:0)})),document.addEventListener("darkModeChange",(()=>n.checked=1===t())))})),document.addEventListener("keydown",(n=>{if((n.ctrlKey||n.metaKey)&&n.shiftKey&&("d"===n.key||"D"===n.key)){n.preventDefault();const r=1-t();e(r)}}))})();