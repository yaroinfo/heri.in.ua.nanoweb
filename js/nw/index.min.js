let NW_LS_ALERT="nwAlert",NW_LS_SETTINGS_DARKMODE=(document.querySelectorAll("[nwalert]").forEach(t=>{let n=t.getAttribute("nwalert"),r=(localStorage.getItem(NW_LS_ALERT)||"").split("\n").filter(e=>""!=e);r.includes(n)&&t.classList.add("collapsed"),t.addEventListener("click",()=>{var e;t.classList.toggle("collapsed"),t.classList.contains("collapsed")?r.push(n):-1!==(e=r.indexOf(n))&&r.splice(e,1),localStorage.setItem(""+NW_LS_ALERT,r.join("\n"))})}),document.querySelectorAll("template[nw-clone]").forEach(d=>{let u=d.getAttribute("nw-clone");var e=`nwclone[name="${u}"]`;document.querySelectorAll(e).forEach(e=>{let t=document.importNode(d.content,!0).firstElementChild;Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)});var n=u,r=t,a=e;if(n=n.split("."),a=a.getAttribute("href"),"file"===n[0]&&a){var l,n=a.split("/").pop(),o=n.split("."),i=o.pop(),o=o[0],c=r,s={href:a,filename:n,basename:o,ext:i};for(l in s){let t=s[l];c.querySelectorAll(`[nw="${l}"]`).forEach(e=>e.innerText=t)}}t.removeAttribute("nw-clone"),e.parentNode.replaceChild(t,e)})}),NW_LS_DEBUG_MODE="nwDebugMode",window.nwCHECK="✓",window.nwTIMES="✗",window.nwFindAllParents=(e,t="*",n=0)=>{var r=[];let a=e.parentElement;for(;a&&a!==document.body&&!(n instanceof HTMLElement&&a===n)&&!(a.matches(t)&&(r.push(a),0<n)&&n==r.length);)a=a.parentElement;return r},window.nwFindParent=(e,t="*",n=0)=>{e=window.nwFindAllParents(e,t,n||1);return e.length?e[0]:null},window.nwScrollTo=(e,t=!1)=>{var n=document.querySelectorAll(".sticky-top");let r=0,a=0,l=(n.forEach(e=>{r+=e?e.offsetHeight:0,a+=e?parseInt(window.getComputedStyle(e).marginTop)+parseInt(window.getComputedStyle(e).marginBottom):0}),e.getBoundingClientRect().top+window.scrollY);return t&&(l-=e.offsetHeight),window.scrollTo({top:l-r-a,behavior:"smooth"}),!0},window.nwSupportsES2018=()=>{try{return new RegExp("\\p{L}","u"),!0}catch(e){return!1}},window.nwTruncateText=(e,t=255)=>{let n=e;return e.length>t&&(0<(e=(n=e.substring(0,t)).lastIndexOf(" "))&&(n=n.substring(0,e)),n+="..."),n},window.nwEscapeHTML=e=>e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]}),window.nwBreakpoint=e=>{e=getComputedStyle(document.documentElement).getPropertyValue("--bs-breakpoint-"+e).trim();return parseInt(e,10)},window.nwSetDebugMode=e=>{localStorage.setItem(NW_LS_DEBUG_MODE,e?"1":"0"),console.log("Debug mode is "+(e?"%cEnabled "+window.nwCHECK:"%cDisabled "+window.nwTIMES),`color: ${e?"green":"red"}; font-size: 144%`)},window.nwIsDebugMode=()=>!!parseInt(localStorage.getItem(NW_LS_DEBUG_MODE)||"0",10),window.nwCreateHTML=(e,t={},n=null,r=!1)=>{let a=document.createElement(e);for(var l in t)a.setAttribute(l,t[l]);function o(e){if(e instanceof HTMLElement)a.appendChild(e);else if("string"==typeof e){var t=document.createElement("div");for(t.innerHTML=e;t.firstChild;)a.appendChild(t.firstChild)}else Array.isArray(e)?e.forEach(e=>o(e)):window.nwIsDebugMode()&&console.error("Cannot append item",e)}return r?Array.isArray(n)?n.forEach(e=>o(e)):o(n):n&&(a.innerText=n),a},window.nwL=(e,t,n=null)=>{if(Array.isArray(e)){let n=t[e[0]]||e[0];if("string"!=typeof n)return console.error("Impossible to translate",e),"Impossible to translate []";let r=[];return e.slice(1).forEach((e,t)=>{"object"==typeof e?Object.entries(e).forEach(([e,t])=>r.push([`{${e}}`,t])):r.push(["$"+(t+1),e])}),r.forEach(([e,t])=>n=n.replaceAll(e,t)),n}return void 0===t[e]?null===n?e:n:t[e]},window.nwCopy=function(e){return Array.isArray(e)?e.slice():"object"==typeof e?null===e?null:Object.assign({},e):e},window.nwRender=function(e,l){for(let a in l)if(!a.startsWith("$")){let r="nw-"+a;e.querySelectorAll(`[${r}]`).forEach(e=>{var t,n=e.getAttribute(r);"text"===n?e.textContent=l[a]:"html"===n?e.innerHTML=l[a]:(n=n||a,t=e.getAttribute(n),""===l[a]&&""!==t||e.setAttribute(n,l[a]))})}return e},window.nwReadOpts=function(e,n={foo:""},t={foo:":)"}){let r={};return e.split(";").forEach(e=>{var e=e.trim().split(":"),t=e[0].trim();""!==t&&(e=e.slice(1).join(":").trim(),!0===n||void 0!==n[t])&&(r[t]=e,Array.isArray(n[t])?r[t]=e.split(","):"number"==typeof n[t]?r[t]=Number.isInteger(n[t])?parseInt(e,10):parseFloat(e):"boolean"==typeof n[t]?r[t]=["true","on","1",1,!0].includes(e):"object"==typeof n[t]&&null!==typeof n[t]&&(r[t]=new URLSearchParams(e)))}),Object.assign({},t,r)},window.nwCastTo=function(e,t){return"string"==typeof t?String(e):"number"==typeof t?"string"==typeof e?Number(e.replace(/[^\d\.]+/g,"")):Number(e):"boolean"==typeof t?Boolean(e):e},window.nwLog=function(){var e,t=[];let n=0;for(e of arguments)"boolean"==typeof e&&0===n?(t.push("%c"+(e?window.nwCHECK:window.nwTIMES)),t.push(`color: ${e?"lightgreen":"red"}; font-weight: bold;`)):t.push(e),++n;return t},window.nwRedirect=function(e){var t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click()},"nw.DarkMode"),NW_SELECTOR_DARKMODE_SWITCH='[nw="DarkMode"]',NW_DARKMODE=1,NW_DARKMODE_OFF=0,NW_FORM_SCROLL_TIMEOUT=(window.NW_DARKMODE=NW_DARKMODE,window.NW_DARKMODE_OFF=0,window.nwDetectDarkMode=()=>0,window.nwEnableDarkMode=e=>!1,window.nwIsDarkMode=()=>!1,(()=>{window.nwEnableDarkMode=e=>{console.log("Dark mode is",e?"enabled":"disabled"),localStorage.setItem(NW_LS_SETTINGS_DARKMODE,e),document.dispatchEvent(new Event("darkModeChange"));e=null===e?window.matchMedia("(prefers-color-scheme: dark)").matches:parseInt(e);document.documentElement.setAttribute("data-bs-theme",e?"dark":"light")},window.nwDetectDarkMode=()=>{let e=localStorage.getItem(NW_LS_SETTINGS_DARKMODE)||NW_DARKMODE_OFF;return null===(e=null===e&&window.matchMedia("(prefers-color-scheme: dark)").matches?NW_DARKMODE:e)&&"dark"===document.documentElement.getAttribute("data-bs-theme")&&(e=NW_DARKMODE),parseInt(e)};let n=t=>{document.querySelectorAll(NW_SELECTOR_DARKMODE_SWITCH).forEach(e=>e.checked=t)};window.nwEnableDarkMode(localStorage.getItem(NW_LS_SETTINGS_DARKMODE)||NW_DARKMODE_OFF),window.nwIsDarkMode=()=>parseInt(localStorage.getItem(NW_LS_SETTINGS_DARKMODE))===NW_DARKMODE,document.addEventListener("DOMContentLoaded",()=>{let e=!1;document.querySelectorAll(NW_SELECTOR_DARKMODE_SWITCH).forEach(t=>{t.checked=NW_DARKMODE===window.nwDetectDarkMode(),t.addEventListener("change",e=>{window.nwEnableDarkMode(e.currentTarget.checked?NW_DARKMODE:NW_DARKMODE_OFF),n(t.checked)}),document.addEventListener("darkModeChange",()=>t.checked=NW_DARKMODE===window.nwDetectDarkMode()),e||(window.nwEnableDarkMode(t.checked?NW_DARKMODE:NW_DARKMODE_OFF),n(t.checked),e=!0)})})})(),document.querySelectorAll("email").forEach(function(e){var t,n=e.getAttribute("a"),r=parseInt(e.getAttribute("s"),10),a=e.getAttribute("q")||"",r=([r,t=1]=[n,r],r.split("").map(function(e){return String.fromCharCode(e.charCodeAt(0)-t)}).join(""));let l=document.createElement("a");l.href="mailto:"+r,a&&(l.href+="?"+a),l.innerHTML=e.innerHTML.replace(n,r),Array.from(e.attributes).forEach(e=>{"a"!==e.name&&l.setAttribute(e.name,e.value)}),e.parentNode.replaceChild(l,e)}),(()=>{var e=document.querySelectorAll("form[novalidate]");let h=window.nwCreateHTML;Array.from(e).forEach(w=>{w.addEventListener("submit",async e=>{var n=w.getAttribute("nw-form");if("false"!==n)if(e.preventDefault(),w.classList.add("was-validated"),w.checkValidity()){var n=w.getAttribute("action"),r=w.getAttribute("method")||"POST",a=new FormData(w),l=w.parentElement;let e="danger",t="";try{var o=await fetch(n,{method:r,body:a});if(t=await o.text(),o.ok)e="success";else if(401===o.status)e="warning";else if(400===o.status){e="danger";for(var i of t.split("\n")){var c,s=i.split(": "),d=s[0],u=w.querySelector(`[name="${d}"]`);u?(c=window.nwFindParent(u,'[nw="input-container"]').querySelector(".invalid-feedback"))?(c.textContent=s.slice(1).join(": "),c.style.display="block",u.classList.add("is-invalid"),w.classList.remove("was-validated")):t=i:console.error("Cannot find a field:",d)}}}catch(e){t=e.message||"Network error, please try again.",console.error("Submission error:",e)}n=h("div",{class:"alert alert-"+e},t);"success"===e&&(l?(new bootstrap.Collapse(l,{toggle:!1}).hide(),l):w).insertAdjacentElement("beforebegin",n),window.nwScrollTo(n)}else e.stopPropagation()},!1)})})(),333),NW_SELECTOR_HOTKEY=((()=>{let l=document.querySelectorAll("form[nw-form]"),e={slider:0};function n(e,t=null){e=window.nwReadOpts(e,!0,{})||{};let a=!1;Object.entries(e).forEach(([n,r])=>{l.forEach(e=>{let t=!1;e.querySelectorAll(`[name="${n}"]`).forEach(e=>{t=!0,a=!0,e.value=r}),t&&setTimeout(()=>{window.nwScrollTo(e)},NW_FORM_SCROLL_TIMEOUT)})}),!a&&t&&window.nwRedirect(t)}var t;window.location.search&&(t=new URLSearchParams(window.location.search).get("nw-form"))&&n(t),Array.from(l).forEach(l=>{window.nwReadOpts(l.getAttribute("nw-form"),e,e);let o=l.querySelector("[nw-progress]");l.querySelectorAll("[nw-prev], [nw-next]").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=window.nwFindParent(this,"[nw-step]"),t=this.getAttribute("nw-prev")||this.getAttribute("nw-next"),t=l.querySelector(`[nw-step="${t}"]`),n=l.querySelectorAll("[nw-step]"),r=this.hasAttribute("nw-prev");let a=!0;r||e.querySelectorAll("input, select, textarea").forEach(e=>{e.checkValidity()?(e.classList.remove("is-invalid"),e.classList.add("is-valid")):(a=!1,e.classList.remove("is-valid"),e.classList.add("is-invalid"))}),a&&(n.forEach(e=>e.classList.add("d-none")),e=(r=Array.from(n)).indexOf(t)+1,o&&(o.style.width=parseInt(100*e/r.length)+"%"),t.classList.remove("d-none"))})}),l.querySelectorAll("select[name]").forEach(n=>{n.addEventListener("change",function(e){var t=n.options[n.selectedIndex].getAttribute("nw-filter");if(t){t=JSON.parse(t);for(let[e,a]of Object.entries(t))l.querySelectorAll(`select[name="${e}"], select[plural-name="${e}"]`).forEach(n=>{let r=!1;var e=Array.from(n.querySelectorAll("option"));e.forEach((e,t)=>{Array.isArray(a)&&a.includes(e.value)||!Array.isArray(a)&&a==e.value?e.removeAttribute("disabled"):(e.setAttribute("disabled",!0),t===n.selectedIndex&&(r=!0))}),r&&(e=e.indexOf(n.querySelector("option:not([disabled])")),n.selectedIndex=e)})}})})}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("a[nw-form], button[nw-form]").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),t=(e&&history.pushState({},"",e),this.getAttribute("nw-form"));n(t,e)})})})})(),document.querySelectorAll("select[nw-depend]").forEach(n=>{var e=(n.getAttribute("nw-depend")||"").split(":"),t=e[0];let r=e[1]||"value";document.querySelectorAll(t).forEach(t=>{function e(){n.querySelectorAll("option").forEach(e=>{""===e.value||e.getAttribute(r)===t.value?e.classList.remove("d-none"):e.classList.add("d-none")})}t.addEventListener("change",e),e()})}),(()=>{function e(e){var t=function(e){let t=e.closest("[nw=range-value]");return(t=t||e.parentElement.querySelector("[nw=range-value]"))||(e=window.nwFindParent(e,'[nw="input-container"]'))&&(t=e.querySelector("[nw=range-value]")),t}(e);return t&&("INPUT"===t.tagName?t.value=e.value:t.textContent=e.value),{$value:t,input:e}}function t(){document.querySelectorAll('input[type="range"]').forEach(t=>{t.addEventListener("input",()=>{e(t)}),t.addEventListener("render",()=>{e(t)});let n=e(t).$value;n&&"INPUT"===n.tagName&&n.addEventListener("input",e=>{!function(e,t){t.value=this.value}.apply(n,[e,t])})})}document.addEventListener("DOMContentLoaded",()=>{t()}),window.nwFormsRangeValueAttachListeners=t})(),(()=>{var e=document.getElementById("galleryModal");if(e){let l=e.querySelector(".carousel-inner");if(l){let n=document.querySelectorAll("img[nw-gallery]"),a=new bootstrap.Modal(e);function t(){let t=this.getAttribute("nw-gallery")||"*";var e=Array.from(n).filter(e=>e.getAttribute("nw-gallery")===t);let r=0;l.innerHTML="",e.forEach((e,t)=>{e.src===this.src&&(r=t);var n=document.createElement("div"),t=(n.className="carousel-item "+(0===t?"active":""),document.createElement("img"));t.src=e.getAttribute(e.hasAttribute("href")?"href":"src"),t.className="d-block w-100",t.alt=e.alt,n.appendChild(t),l.appendChild(n)}),new bootstrap.Carousel(l).to(r),a.show()}n.forEach(e=>{e.addEventListener("click",t)})}}})(),"[nw-hotkey]"),NW_ATTRIBUTE_HOTKEY="nw-hotkey",NW_ATTRIBUTE_LAZY_SRC=(window.nwHotkeys=[],window.nwHotkeysAttach=(e=document,t=NW_SELECTOR_HOTKEY,n=NW_ATTRIBUTE_HOTKEY)=>[],(()=>{window.nwHotkeysAttach=(e=document,t=NW_SELECTOR_HOTKEY,n=NW_ATTRIBUTE_HOTKEY)=>{let o=[];return e.querySelectorAll(t).forEach(l=>{l.getAttribute(n).split("|").forEach(e=>{var t,n,r={key:[]};for(t of e.split("+"))t=t.toLowerCase(),["cmd","meta","win"].includes(t)?r.metaKey=!0:["shift"].includes(t)?r.shiftKey=!0:["ctrl"].includes(t)?r.ctrlKey=!0:["alt"].includes(t)?r.altKey=!0:r.key.includes(t)||r.key.push(t);let a=!1;for(n of window.nwHotkeys)if(n.$el.outerHTML===l.outerHTML){a=!0;break}a||o.push({required:r,$el:l})})}),window.nwHotkeys=[...window.nwHotkeys,...o],o};document.addEventListener("keydown",r=>{("INPUT"!==r.target.tagName&&"TEXTAREA"!==r.target.tagName||r.metaKey||r.altKey||r.ctrlKey)&&window.nwHotkeys.forEach(t=>{let n=!0;["metaKey","shiftKey","ctrlKey","altKey"].forEach(e=>{Boolean(t.required[e])!==r[e]&&(n=!1)}),t.required.key.includes(r.key.toLowerCase())?n&&(!["INPUT","TEXTAREA","SELECT"].includes(t.$el.tagName)||["RADIO","CHECKBOX"].includes(t.$el.getAttribute("type").toUpperCase())?t.$el.click():t.$el.focus(),r.preventDefault()):n=!1})}),window.nwHotkeysAttach()})(),"nwlazy-src"),NW_LS_COMPARE_ITEMS="nw-compare",NW_SELECTOR_POSTS_MORE=((()=>{function u(t,n,r){if("object"==typeof t){var a=[null,null];if(t.min&&(a[0]=t.min),t.max&&(a[1]=t.max),a.some(e=>null!==e))return l=function(e){if(!(e&&e instanceof HTMLElement))return null;switch(e.tagName){case"INPUT":return"checkbox"===e.type||"radio"===e.type?e.checked?e.value:null:e.value;case"SELECT":case"TEXTAREA":return e.value;default:return null}}(r[n]),(null===a[0]||a[0]<=l)&&(null===a[1]||l<=a[1])&&l}if(r){a=r[n];if(!a)return!1;var l=a.getAttribute("nw-key")||!1;if(!l)return!1;var o,i,n=l.split("."),a=r[n[0]]?.[n[1]||"value"]||null;if(a)return t[a];let e=[];for([o,i]of Object.entries(t))e=[...e,...i];return e}return!1}let n=new URLSearchParams(window.location.search),w={_min:(e,t)=>t<=e,_max:(e,t)=>e<=t,_exact:(e,t)=>e==t};var e=localStorage.getItem(NW_LS_COMPARE_ITEMS)||"[]";let a=JSON.parse(e),r;function o(e,t){if(t.values&&t.values instanceof URLSearchParams){t=t.values.get(e);if(null!==t)return t}return n.get(e)}function l(e,l,t){window.nwIsDebugMode()&&console.log.apply(this,window.nwLog("Filtering list",e,l));let d=t.detail||{},n=[];e.querySelectorAll("[nw=item]").forEach(r=>{let a={},s=[!0];(l.filter||[]).forEach(n=>{if(n.endsWith("s")){var e="nw-"+n,e=r.hasAttribute(e)?r.getAttribute(e).split("|"):[],t=o(n.slice(0,n.length-1),l);a[n]=e,null!==t&&s.push(e.includes(t))}else{let t=null;r.querySelectorAll(`[nw-${n}]`).forEach(e=>{t=e.getAttribute("nw-"+n),a[n]=t}),null!==t&&null!==(e=o(n))&&s.push("date"===n?t.startsWith(e):t===e)}}),Array.from(r.querySelectorAll("*")).filter(e=>Array.from(e.attributes).some(e=>e.name.startsWith("nw-"))).forEach(e=>Array.from(e.attributes).forEach(e=>{e.name.startsWith("nw-")&&(a[e.name]=e.value)}));var e=JSON.parse(r.getAttribute("nw-filter")||null);a.filters=e,n.push(a),e&&Object.entries(e).forEach(([e,t])=>{let[n,r,a,l,o,i]=function(e,t){var{$filter:n,$inputs:r,filter:a}=t;if(a){if(void 0!==a[e])return[e,a[e],w._exact,r,n,!1];for(var[l,o]of Object.entries(w)){var i=e.endsWith(l)?e.slice(0,e.length-l.length):""+e+l;if(void 0!==a[i])return[i,a[i],o,r,n,e.endsWith(l)]}}return[!1]}(e,d);var c;n&&""!==r&&(i&&(c=window.nwCopy(r),r=window.nwCopy(t),t=window.nwCastTo(c,r)),c=function(n){let{fn:r,key:e,value:a,filterValue:l,filterKey:t,$inputs:o}=n,i=1;if(Array.isArray(a)){let t=window.nwCastTo(l,a[0]||!1);return a.some(e=>r.apply(this,[e,t]))}if("object"==typeof a){n=u(a,t,o);if(!1===n)return!1;if(Array.isArray(n)){let t=window.nwCastTo(l,n[0]||!1);return n.some(e=>r.apply(this,[e,t]))}{let e=window.nwCastTo(l,n||!1);return r.apply(this,[n,e])}}e.toLowerCase().endsWith("rate")&&(i=100);let c=window.nwCastTo(l,i*(a||!1));return r.apply(this,[a*i,c])}.apply(this,[{fn:a,key:e,value:t,filterValue:r,filterKey:n,$inputs:l,$filter:o}]),window.nwIsDebugMode()&&console.log.apply(this,window.nwLog(c,"=",a.name,n,t,r)),s.push(c))}),s.every(e=>!!e)?(r.classList.remove("off"),r.classList.add("on")):(r.classList.remove("on"),r.classList.add("off"))}),window.nwLoadedList={posts:n,$list:e,opts:l}}function c(e,t){Array.from(t.querySelectorAll("[nw=item]:not(.on)")).length?e.classList.remove("disabled"):e.classList.add("disabled")}function i(e,n,o){if(o.template){let l=document.querySelector(o.template);if(l){let r=document.createDocumentFragment();var i=n.querySelector("[nw=more]");let t=o.perPage,a=o.first||t;e.forEach((e,t)=>{var e=Object.assign({},e,{href:e.$uri+".html"}),e=window.nwRender(l.content.cloneNode(!0),e),n=e.querySelector("[nw=item]");t<a&&n?n.classList.add("on"):o.lazy&&n.querySelectorAll("img[src]").forEach(e=>{e.setAttribute(NW_ATTRIBUTE_LAZY_SRC,e.getAttribute("src")),e.setAttribute("src","")}),r.appendChild(e)}),i?(n.insertBefore(r,i),i.addEventListener("click",function(e){!function(e,t,n,r){(n=Array.from(t.querySelectorAll("[nw=item]:not(.on)")).slice(0,n)).forEach(e=>{e.classList.add("on"),r.lazy&&e.querySelectorAll(`img[${NW_ATTRIBUTE_LAZY_SRC}]`).forEach(e=>{e.setAttribute("src",e.getAttribute(NW_ATTRIBUTE_LAZY_SRC))})}),n.length&&window.nwScrollTo(n[0]),c(this,t)}.apply(this,[e,n,t,o])}),c(i,n)):n.appendChild(r)}}}async function s(e,t){var l,n=t.url.startsWith("/search/")?t.url.slice("/search".length):t.url;try{var r=(await window.nwSearchIndexFile(n)).posts;l=t,r=r.filter(r=>{let a=[];return(l.filter||[]).forEach(e=>{var t,n;e.endsWith("s")?(t=r[e]||[],null!==(n=o(e.slice(0,e.length-1),l))&&a.push(t.includes(n))):null!==(t=r[e]||null)&&null!==(n=o(e,l))&&a.push("date"===e?t.startsWith(n):t===n)}),a.every(e=>!!e)}),window.nwLoadedList={posts:r,$list:e,opts:t},i(r,e,t)}catch(e){window.nwIsDebugMode()&&console.error(e)}}function d(e){return(r||window.location.pathname)+"?i="+e}function h(e){return a.includes(d(e))}function p(e){Array.isArray(e)&&(localStorage.setItem(NW_LS_COMPARE_ITEMS,JSON.stringify(e)),a=e)}function f(e,t){e?(t.classList.remove("off"),t.classList.add("on")):(t.classList.remove("on"),t.classList.add("off")),m()}function m(n=null){null===n&&(n=[],document.querySelectorAll("[nw=item]").forEach((e,t)=>{h(t)&&n.push(t)}));var e=document.getElementById("comparePanel"),t=e.querySelector("#compareTable");e&&t&&(n.length?e.classList.add("show"):e.classList.remove("show"),e.querySelectorAll('[nw="compare-count"]').forEach(e=>e.textContent=n.length),t.querySelectorAll("tr").forEach(e=>{e.querySelectorAll("th, td").forEach((e,t)=>{e.style.display=n.includes(t-1)||!t?"table-cell":"none"})}))}function g(e,t,n,r){e.preventDefault(),f(function(e){var t=a.indexOf(e);let n=!0;return-1<t?(a.splice(t,1),n=!1):a.push(e),p(a),n}(d(r)),t)}function E(){let t=d(""),n=[];(a||[]).forEach(e=>{e.startsWith(t)||n.push(e)}),p(n),m([])}let y=new Event("nwFilter");document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[nw=list]").forEach(t=>{e=t.getAttribute("nwopts")||"";let n=window.nwReadOpts(e,{filter:[],values:{},perPage:1,lazy:0,template:"",url:"",root:""},{filter:["date","cats"],values:{},lazy:null,perPage:null,template:null,url:null,root:null});var e;n.root&&(r=n.root),t.addEventListener("nwFilter",function(e){window.nwIsDebugMode()&&console.log({$list:t,opts:n,event:e}),n.url?s(t,n):l(t,n,e)}),t.dispatchEvent(y),t.querySelectorAll("[nw=item]").forEach((e,n)=>{e.querySelectorAll("[nw=compare]").forEach(t=>{f(h(n),t),t.addEventListener("click",e=>g(e,t,0,n))})})}),document.querySelectorAll("#comparePanel").forEach(e=>{e.querySelectorAll('[nw-compare="clear"]').forEach(e=>{e.addEventListener("click",E)})});var e=document.querySelector("#compareTable");let t=document.querySelector("#comparePanel");e&&(e.setAttribute("scrolled",!0),e.addEventListener("hidden.bs.collapse",e=>{history.replaceState(null,null,window.location.pathname)}),"#compareTable"===window.location.hash)&&(window.setTimeout(()=>window.nwScrollTo(t,!0),108),e=document.querySelector('[href="#compareTable"]'))&&e.dispatchEvent(new Event("click"))})})(),(()=>{let s="input[name], select[name], textarea[name]";document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[nw=filter]").forEach(c=>{c.querySelectorAll(s).forEach(l=>{{var a=l;let n=a.getAttribute("list")||null;var e=n&&document.getElementById(n)||null,t=a.getAttribute("nw-key")||null;let r=t?a.form[t.split(".")[0]]:null;function o(e){if(e){let t=[];[...e.children].forEach(e=>{a.min=Math.min(a.min||Number.MAX_SAFE_INTEGER,e.value),a.max=Math.max(a.max||0,e.value),t.push(parseFloat(e.value))}),t.length&&(a.step=1),a.steps=t.sort((e,t)=>e-t)}}function i(e){let n=parseFloat(a.value),t=a.steps.reduce((e,t)=>Math.abs(t-n)<Math.abs(e-n)?t:e);!e||"ArrowRight"!==e.key&&"ArrowUp"!==e.key?!e||"ArrowLeft"!==e.key&&"ArrowDown"!==e.key||0<=(e=a.steps.indexOf(t)-1)&&(t=a.steps[e]):(e=a.steps.indexOf(t)+1)<a.steps.length&&(t=a.steps[e]),n!==t&&(a.value=t),a.dispatchEvent(new Event("render"))}e&&(o(e),a.addEventListener("input",i),a.addEventListener("keydown",i)),r&&r.addEventListener("change",()=>{var e=n.replace("-all","-"+r.value),t=document.getElementById(e);t&&(a.setAttribute("list",e),o(t),i())})}l.addEventListener("change",e=>{var t,r,n,a;t=l,r=c,n=new URLSearchParams(window.location.search),a=t.getAttribute("name"),(t=t.value)?t!=n.get(a)&&n.set(a,t):n.delete(a),window.history.pushState({},"",window.location.pathname+"?"+n.toString()),t=r.getAttribute("nw-target")||"[nw=list]",document.querySelectorAll(t).forEach(e=>{let n={$filter:r,filter:{},$inputs:{}};r.querySelectorAll(s).forEach(e=>{var t=e.getAttribute("name");n.$inputs[t]=e,n.filter[t]=e.value});var t=new CustomEvent("nwFilter",{bubbles:!0,detail:n});e.dispatchEvent(t)})})})});let n=new URLSearchParams(window.location.search),r=[],t=(document.querySelectorAll("[nw=filter]").forEach(e=>{e.querySelectorAll(s).forEach(e=>{var t=e.getAttribute("name");n.has(t)&&(e.value=n.get(t),r.push(e))})}),new Event("change"));r.forEach(e=>e.dispatchEvent(t)),window.nwFormsRangeValueAttachListeners&&window.nwFormsRangeValueAttachListeners()})})(),'[nw="LoadMore"]'),NW_DATA_PREFIX="nw-",NW_SELECTOR_BS_HAMBURGER_TOGGLER=((()=>{let s=NW_DATA_PREFIX;document.addEventListener("DOMContentLoaded",()=>{function c(e){e.closest("article").classList.add("disabled")}document.querySelectorAll(NW_SELECTOR_POSTS_MORE).forEach(function(a){let l=window.nwFindParent(a,`[${s}per-page]`);if(l&&l.getAttribute(s+"per-page")){let t=l.getAttribute(s+"count"),n=parseInt(l.getAttribute(s+"per-page")),r=Array.from(l.querySelectorAll(`[${s}id]:not([${s}hidden])`));var e=l.querySelectorAll(`.d-none[${s}id]:not([${s}hidden])`),o=l.querySelectorAll(`[${s}id]:not(.d-none)`),e=(!e.length&&o.length>=t&&c(a),a.addEventListener("click",function(){var e=l.querySelector(`.d-none[${s}id]:not([${s}hidden])`);e?(e=r.indexOf(e),r.slice(e,e+n).forEach(e=>{e.querySelectorAll(`[${s}src]`).forEach(e=>e.setAttribute("src",e.getAttribute(s+"src"))),e.classList.remove("d-none")}),location.hash="loaded="+(e+n),e+n>=t&&c(a)):a.classList.add("d-none")}),o.length||a.dispatchEvent(new Event("click")),location.hash.match(/loaded=(\d+)/)),o=e?parseInt(e[1],10):0;if(0<o){var i=Math.ceil(o/n)-1;for(let e=0;e<i;e++)a.dispatchEvent(new Event("click"))}}})})})(),'.hamburger[data-bs-toggle="collapse"]'),NW_LS_RECENT_ITEMS=((()=>{function t(e){this.classList.toggle("is-active")}document.querySelectorAll(NW_SELECTOR_BS_HAMBURGER_TOGGLER).forEach(e=>e.addEventListener("click",t))})(),(()=>{var e=decodeURIComponent(window.location.pathname+window.location.search);document.querySelectorAll(`[href="${e}"]`).forEach(e=>e.classList.add("active"))})(),"recentGoods"),NW_SELECTOR_SCROLL_TO=(document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[name=nw-add-to-recent]").forEach(e=>{var e=e.getAttribute("extended")||e.value,t=JSON.parse(localStorage.getItem(NW_LS_RECENT_ITEMS))||[];e&&!t.includes(e)&&t.push(e),localStorage.setItem(NW_LS_RECENT_ITEMS,JSON.stringify(t))})}),"[nw-scrollto]"),NW_ATTRIBUTE_SCROLL_TO="nw-scrollto",splitSearch=((()=>{let n=e=>{if(!e||"#"===e||e.startsWith("#/nw/"))return!1;let t=null;try{t=document.querySelector(e)}catch(e){return window.nwIsDebugMode()&&console.error("Error selecting hash element:",e),!1}return!(!t||t.getAttribute("scrolled"))&&window.nwScrollTo(t)};let t=(e,t)=>!(!e||!e.startsWith("#")||(t.preventDefault(),window.location.hash=e,n(e),0)),r=e=>{if(t(e.currentTarget.getAttribute(NW_ATTRIBUTE_SCROLL_TO),e))return!0;t(e.target.closest("[href]").getAttribute("href"),e)};window.location.hash&&setTimeout(()=>{window.nwIsDebugMode()&&console.log("Scrolling to",window.location.hash);var e=n(window.location.hash);window.nwIsDebugMode()&&console.log("scrolled = "+(e?"YES":"skipped"))},108),window.addEventListener("hashchange",e=>{e.preventDefault(),n(window.location.hash)}),document.querySelectorAll('a[href^="#"]').forEach(e=>e.addEventListener("click",r)),document.querySelectorAll(NW_SELECTOR_SCROLL_TO).forEach(e=>e.addEventListener("click",r))})(),e=>e.split(window.nwSupportsES2018?/[^\p{L}\w\d]+/u:/[\s!;\.\,]+/));window.nwSearchTextValue=null,window.nwSearchResults=[],window.nwSearchTotal=0,window.nwSearchLoadedFiles={},window.nwSearchIndexFile=async function(e=null){var e=e||window.location.pathname.replace(/\.html$/,".txt"),t="/search"+e;if(!window.nwSearchLoadedFiles[t]){var n=await fetch(t);if(400<=n.status)return window.nwIsDebugMode()&&console.error("Search.api",n.status,"error in response to",t),{text:"",posts:[],file:t,uri:e};var n=await n.text(),r=n.trim().split("\n\n").map(e=>JSON.parse(e));r.sort((e,t)=>new Date(t.date)-new Date(e.date)),window.nwSearchLoadedFiles[t]={text:n,posts:r,file:t,uri:e}}return window.nwSearchLoadedFiles[t]},window.nwSearch=async function(e){if("string"==typeof e&&e.length<2)return{results:[],total:null};if(window.nwSearchTextValue===e)return{results:window.nwSearchResults,total:window.nwSearchTotal};window.nwSearchTextValue=e;var t=document.documentElement.lang,n=Date.now();let l=e.toLowerCase();var e=(await(await fetch("/search/index.json",{cache:"reload"})).json()).version||"",r=await fetch(`/search/${t}.txt?ver=`+e,{method:"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}}),a=r.headers.get("Content-Encoding"),o=r.headers.get("Content-Length"),t=`search/${t}.txt: ${((Date.now()-n)/1e3).toFixed(2)}sec | ${(o/1024).toFixed(1)}Kb | ${e.slice(0,4)}..`+e.slice(-4),n=(a&&a.includes("gzip")?console.log(t):console.error(t),await r.text());o=n.trim().split("\n\n").map(e=>(e=>{try{var t=JSON.parse(e);return{uri:t.$||"",title:t.t||"",desc:t.d||"",image:t.i||"",body:t.c||"",date:t.a||null}}catch(e){window.nwIsDebugMode()&&console.error(e)}return{}})(e));let i=splitSearch(l.toLowerCase());window.nwSearchStr=l,window.nwSearchTokens=i,window.nwSearchMap={};e=o.map(({uri:t,title:e,desc:n,image:r,body:a})=>{try{return{uri:t,title:window.nwSearchMap[t]=e,desc:n,image:r,body:a,score:((e,t,n,r,a)=>{a=n+" "+r+" "+a,n=n.toLowerCase(),r=r.toLowerCase();let l=a.toLowerCase(),o=0,i=0,c=n.trim(),s=r.trim(),d=l.trim(),u=-1,w=(t.forEach(e=>{var t;e.length<3||(c=c.replaceAll(e,""),s=s.replaceAll(e,""),d=d.replaceAll(e,""),-1!==(t=l.indexOf(e))&&(o+=e.length,-1!==u)&&(e=Math.abs(t-u),i+=Math.max(0,30-e)),u=t)}),o=(o=(o+=100*(n.length-c.length))+10*(r.length-s.length))+(l.length-d.length),0),h=(n.includes(e)&&(w=1e5/Math.abs(e.length-n.length||1)),0);r.includes(e)&&(h=1e4/Math.abs(e.length-r.length||1));a=l.includes(e)?1e3:0;return o+i+w+h+a})(l,i,e,n,a)}}catch(e){return window.nwIsDebugMode()&&console.error("Cannot parse search index",e),{uri:t,title:"NOT_FOUND",desc:"",image:"",body:"",score:0}}}).filter(e=>0<e.score);return e.sort((e,t)=>t.score-e.score),window.nwSearchResults=e,window.nwSearchTotal=o.length,{results:e,total:window.nwSearchTotal}},(()=>{let o="found-h",i=["header.root","footer.root","script","style"];if(window.nwHighlightText=(n,r,e=document.body,a=!1)=>{var l=[];for(let t of e.querySelectorAll("*"))if(!(0<t.children.length||i.some(e=>t.matches(e)))){let e=t.innerHTML;var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`(${o})`,"gi");o.test(e)&&(e=e.replace(o,`<span class="${r}">$1</span>`),l.push(t)),t.innerHTML=e,a&&t.addEventListener("click",function(){this.innerHTML=this.innerHTML.replace(new RegExp(`<span class="${r}">(.*?)</span>`,"gi"),"$1")})}return l},"function"!=typeof window.nwFindParent)return console.error("window.nwFindParent not found");function u(e,n=document.body){var n=n.querySelectorAll("*"),r=splitSearch(e),a=[];for(let t of n)if(!(0<t.children.length||i.some(e=>t.matches(e)))){let e=t.innerHTML;for(var l of r){l=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=new RegExp(`(${l})`,"gi");l.test(e)&&(e=e.replace(l,`<span class="${o}">$1</span>`),a.push(t))}t.innerHTML=e,t.addEventListener("click",function(){this.innerHTML=this.innerHTML.replace(new RegExp(`<span class="${o}">(.*?)</span>`,"gi"),"$1")})}return a}function r(e){e.length&&(e=e.reduce((e,t)=>t.offsetTop<e.offsetTop?t:e,e[0]),window.nwScrollTo(e))}(()=>{var e=document.getElementById("searchModal");let r=document.getElementById("searchInput"),l=document.getElementById("searchResults"),n=document.getElementById("searchResultTemplate");var t=document.getElementById("searchSubmit"),a=document.getElementById("searchForm");let o=document.getElementById("searchSummaryTemplate");if(!r||!l||!n)return console.error("Modal search template not found");let i=0,c=[];function s(){var e=12*i,t=12+e;c.slice(e,t).forEach(a=>{var e=n.content.cloneNode(!0),e=(e.querySelectorAll('[nw="img"]').forEach(e=>e.setAttribute("src",a.image)),e.querySelectorAll('[nw="title"]').forEach(e=>e.textContent=a.title),e.querySelectorAll('[nw="desc"]').forEach(e=>e.textContent=window.nwTruncateText(a.desc||a.body,255)),e.querySelectorAll('[nw="url"]').forEach(e=>{var t="find="+encodeURIComponent(r.value),n=a.uri+".html";n.includes("?")?e.setAttribute("href",n+"&"+t):e.setAttribute("href",n+"?"+t)}),e.querySelectorAll('[nw="path"]').forEach(r=>{r.innerHTML="",function(e,t=3){var n=e.split("/");let r=[];for(let t=2;t<n.length;t++){let e=n.slice(1,t).join("/");""===e&&(e+="index"),["/"+e,"/"+e+"/index"].forEach(e=>{e=e.endsWith(".html")?e.slice(0,e.length-".html".length):e,window.nwSearchMap[e]&&r.push({uri:e+".html",title:window.nwSearchMap[e]})})}return r.slice(-t)}(a.uri).forEach(({uri:e,title:t})=>{var n=document.createElement("li");n.classList.add("breadcrumb-item"),n.innerHTML=`<a href=${window.nwEscapeHTML(e)}>${window.nwEscapeHTML(t)}</a>`,r.appendChild(n)});var e=document.createElement("li");e.classList.add("breadcrumb-item"),r.appendChild(e)}),l.appendChild(e),l.lastElementChild);e.setAttribute("tabindex","0"),e.setAttribute("role","button"),u(r.value,e)}),l.querySelectorAll("article footer").forEach(e=>{e.scrollHeight>e.clientHeight&&e.parentElement.classList.add("overflow")}),i++}function d(e){e&&e.preventDefault(),l.innerHTML="",c=[],window.nwSearch(r.value).then(e=>{var t,n,r=e.results,e=(i=0,c=e.results,t=r.length,n=e.total,o&&(r=o.content.cloneNode(!0),l.appendChild(r),r=l.lastElementChild,t&&r.classList.add("found"),r.querySelectorAll('[nw="found"]').forEach(e=>e.textContent=t),r.querySelectorAll('[nw="total"]').forEach(e=>e.textContent=n)),s(),()=>{var{scrollTop:e,scrollHeight:t,clientHeight:n}=l;t-12<=e+n&&s()});l.removeEventListener("scroll",e),l.addEventListener("scroll",e)})}l.addEventListener("keydown",function(r){let e=Array.from(l.children),t=document.activeElement;if(e.includes(t)){if("Tab"===r.key||"ArrowDown"===r.key||"ArrowUp"===r.key){r.preventDefault();let e=Array.from(l.children),t=document.activeElement;var a=e.indexOf(t);let n=0;"Tab"===r.key||"ArrowDown"===r.key?(a+1>=e.length&&s(),n=a+1<e.length?a+1:0):("ArrowUp"===r.key||"Tab"===r.key&&r.shiftKey)&&(n=0<=a-1?a-1:e.length-1),e[n].focus()}"Enter"===r.key&&(a=t.querySelector('[nw="url"]'))&&a.click()}}),t&&t.addEventListener("click",d),a&&a.addEventListener("submit",d),e.addEventListener("shown.bs.modal",()=>r.focus())})(),document.addEventListener("DOMContentLoaded",function(){function e(e){e=new URLSearchParams(window.location.search).get(e);return e}var t,n=e("find"),n=(n&&r(u(n)),e("findLink"));n&&((t=(t=document.body).querySelectorAll(`[href*="${n}"]`)).forEach(e=>e.classList.add("found-h")),r(Array.from(t)))})})(),(()=>{var e;e={items:[],add:function(e){this.items.push(e),this.updateLocalStorage(),this.render()},has:function(t){return this.items.some(e=>e.id===t)},remove:function(t){this.items=this.items.filter(e=>e.id!==t),this.updateLocalStorage(),this.render()},updateLocalStorage:function(){localStorage.setItem("cart",JSON.stringify(this.items))},loadLocalStorage:function(){var e=localStorage.getItem("cart");e&&(this.items=JSON.parse(e))},render:function(){document.querySelectorAll('[btn-cart="modal"]').forEach(e=>{e=e.querySelector(".badge");e&&(e.textContent=this.items.length)}),document.querySelectorAll("[data-id]").forEach(e=>{var t=e.querySelector("[btn-cart]");window.Cart.has(e.getAttribute("data-id"))?t&&t.classList.add("active"):t&&t.classList.remove("active")})},sampleItem:{id:"xau-1",url:"/good/uri",title:"Good title",image:"/img/path.jpg",price:300.33}},(window.Cart=e).loadLocalStorage(),document.addEventListener("DOMContentLoaded",()=>{var e=document.querySelectorAll("[btn-order]"),t=document.querySelectorAll("[btn-cart]");let a=document.getElementById("orderModal"),o=document.getElementById("cartModal");if(a&&o){let r=new bootstrap.Modal(a),n=new bootstrap.Modal(o);function i(e){for(;e&&!e.getAttribute("data-id");)e=e.parentElement;return e}function c(e){var t=e.getAttribute("data-id"),n=e.querySelector("[data-title]").innerText,r=e.querySelector("[data-image]").getAttribute("src"),e=e.querySelector("[data-price]").innerText;return{id:t,url:location.pathname,title:n,image:r,price:e}}e.forEach(e=>{e.addEventListener("click",function(){var e=c(i(this));a.querySelector("[data-title]").innerText=e.title,a.querySelector("[data-image]").src=e.image,a.querySelector("[data-price]").innerText=e.price,a.querySelector("[data-id]").innerText=e.id,r.show()})}),t.forEach(t=>{if("modal"===t.getAttribute("btn-cart"))t.addEventListener("click",e=>n.show());else{let e=c(i(t));t.addEventListener("click",function(){window.Cart.has(e.id)||window.Cart.add(e),this.classList.toggle("active")})}}),window.Cart.render(),a.querySelector("[type=submit]").addEventListener("click",e=>{e.preventDefault();var e=a.querySelector('input[name="fullName"]').value,t=a.querySelector('input[name="phone"]').value,n=a.querySelector('textarea[name="comment"]').value;localStorage.setItem(LS_ORDER_FULLNAME,e),localStorage.setItem(LS_ORDER_PHONE,t),localStorage.setItem(LS_ORDER_COMMENT,n),r.hide()}),a.addEventListener("shown.bs.modal",e=>e.target.querySelector("input").focus()),o.addEventListener("show.bs.modal",e=>{let n=document.getElementById("cartModalRow");if(n){let l=o.querySelector(".modal-body");if(l){let a=document.getElementById("cartModalEmpty");a&&(l.innerHTML="",window.Cart.items.forEach(e=>{var t=n.content.cloneNode(!0);t.querySelector("[data-url]").setAttribute("href",e.url),t.querySelector("[data-title]").textContent=e.title,t.querySelector("[data-price]").textContent=e.price,t.querySelector("[data-image]").src=e.image,t.querySelector("[data-id]").setAttribute("data-id",e.id),l.appendChild(t)}),l.querySelectorAll("[cart-remove]").forEach(r=>{r.addEventListener("click",e=>{var t=i(r),n=c(t);window.Cart.remove(n.id),t.remove(),window.Cart.items.length||(n=a.content.cloneNode(!0),l.innerHTML="",l.appendChild(n))})}))}}})}})})(),(()=>{let a=window.nwCreateHTML;window.nwTypes||(window.nwTypes={}),window.nwTypes.nwBoolean={$name:"nwBoolean",read:function(e){var{rule:e,field:t,item:n}=e,r=a("div",{class:"value form-check form-switch form-switch-end"}),e=a("label",{class:"form-check-label"},e.title),e=(r.appendChild(e),a("input",{class:"form-check-input",name:t,type:"checkbox",role:"switch"}));return!0===n[t]&&e.setAttribute("checked",!0),r.appendChild(e),r},click:function(e,t,n,r){var a,l=t.target&&"INPUT"===t.target.tagName;l||t.preventDefault(),t.currentTarget?(a=`[name="${e.field}"]`,(t=l?t.target:t.currentTarget.querySelector(a))?("checkbox"!==t.type||l||(t.checked=!t.checked),l="checkbox"===t.type?t.checked:t.value,window.nwEditor.index.change(l,e,t),n&&n.apply(this,[l])):console.error(`Input ${a} not found`)):console.error("No target provided for the click event")}}})(),(()=>{let i=!1,c={},a=window.nwCreateHTML,l=window.nwL,o=!1,s,d={onChange:()=>{},onCancel:()=>{}};function u(e,n,t=0){if(!c[e]){var r=[],a=e.split("/");i&&a.unshift("");for(let t=1;t<=a.length;t++){let e=a.slice(0,t).join("/");var l,o=(e=""===e?"index":e).replace(/^\/+/,"")+".yaml";n[o]&&(l=n[o].category||n[o].title||o,o=o.replace(/\.yaml$/,".html"),r.push(window.nwTypes.a.read({field:"url",item:{url:o,text:l}})))}c[e]=r}return c[e]}function w(e,t){var t=t.data,n=t.all||{},t=t.$l||{},e=u(e,n);let r="";r=e?a("span",{class:"btn-group",role:"group","aria-label":l("Catalog path",t)},e,!0):a("i",{},"empty"),s instanceof HTMLElement&&s.parentElement.replaceChild(r,s),s=r}window.nwTypes||(window.nwTypes={}),window.nwTypes.nwCatalog={$name:"nwCatalog",read:function(e){var{item:t,field:n,rule:r}=e,t=t[n],n=a("div",{class:"value"}),r=a("label",{class:"form-label"},r.title);return n.appendChild(r),w(t,e),n.appendChild(s),n.addEventListener("click",window.nwTypes.nwComponent.allowLinksOnClick),n},path:u,edit:function(t,e,n,r){return d.onChange=n,d.onCancel=r,(o=!o)&&((n=function n(e){let r=a("ul",{class:"nwe-tree list-group"});return Object.entries(e).forEach(([e,t])=>{e=a("li",{class:"list-group-item list-group-item-action "+(t.active?"active":""),value:e,nwe:t.value,tabindex:0},t.label||e),r.appendChild(e),Object.keys(t.children).length&&e.appendChild(n(t.children))}),r}(function(o,i){let e={};return Object.keys(o).forEach(a=>{let l=e;a.split("/").forEach((e,t,n)=>{var r;l[e]||(r=n.join("/"),l[e]={label:t===n.length-1?o[a]:void 0,active:r===i,value:r,children:{}}),l=l[e].children})}),e}(t.data.categories||{},t.item))).querySelectorAll("[value]").forEach(e=>e.addEventListener("click",function(e){!function(e,t){e.preventDefault(),e.stopPropagation();let n=[this.getAttribute("value")];window.nwFindAllParents(this,"[value]",t.$aside||document.body).forEach(e=>{n.unshift(e.getAttribute("value"))}),e=n.join("/"),w(t.item=e,t),window.nwEditor.index.change(e,t,s),o=!1,d.onChange.apply(this,[e])}.apply(this,[e,t])})),{$element:n,onAttach:()=>{}})}}})(),(()=>{let i=window.nwCreateHTML,o={onChange:()=>{},onCancel:()=>{}},c=!1,s;function d(e,t){var n,e=e.split(" "),r=(t.allow||[]).flatMap(e=>e.split(" ")),a=[];for(n of e){var l=i("span",{class:"badge me-2 bg-"+(r.includes(n)?"success":"danger")},n);a.push(l)}t=i("span",{},a,!0);return s instanceof HTMLElement&&s.parentElement.replaceChild(t,s),s=t}window.nwTypes||(window.nwTypes={}),window.nwTypes.nwClassList={$name:"nwClassList",read:function(e){var{field:e,item:t,rule:n}=e,r=i("div",{class:"value"}),a=i("label",{class:"form-label"},n.title);return r.appendChild(a),r.appendChild(d(t[e],n)),r},edit:function(e,t,n,r){if(o.onChange=n,o.onCancel=r,!(c=!c))return!1;let a=function(e){let{field:a,item:t,rule:n}=e,l=t.split(" ");var e=i("div",{class:"value"}),r=i("label",{class:"form-label mb-3"},n.title);e.appendChild(r);let o=i("div",{class:"row"});return(n.allow||[]).forEach(e=>{e.split(" ").forEach(e=>{var t=i("div",{class:"col-6 col-xl-4"}),n=i("div",{class:"form-check"}),r=i("input",{class:"form-check-input",type:"checkbox",name:a+"[]",value:e,id:"checkbox-"+e}),e=(l.includes(e)&&r.setAttribute("checked",!0),i("label",{class:"form-check-label",for:"checkbox-"+e},e));n.appendChild(r),n.appendChild(e),t.appendChild(n),o.append(t)});e=i("div",{class:"col-12"},"<hr>",!0);o.append(e)}),e.appendChild(o),e}(e);var l;return n=a,l=e,n.addEventListener("change",function(e){e.target.matches('input[type="checkbox"]')&&(e=Array.from(this.querySelectorAll('input[type="checkbox"]:checked')).map(e=>e.value),l.item=""+e.join(" "),e=d(l.item,l.rule),window.nwEditor.index.change(l.item,l,e),o.onChange.apply(this,[l.item,!0]))}),{$element:a,onAttach:()=>a.focus()}}}})(),(()=>{let r=window.nwCreateHTML,a={};function l(e){var t=[];return e.input?.loaded&&t.push(e.input?.loaded),e.field&&t.push(e.field),t.join("/")}var e={$name:"nwComponent",read:e=>{var{field:e,item:t,rule:n}=e,n=r("label",{class:"form-label"},n.title||n.name),t=r("span",{},""+t[e]);return r("div",{class:"value"},[n,t],!0)},allowLinksOnClick:function(e){var t;e.target&&(t=window.nwFindParent(e.target,"a",this))&&(t.href&&window.open(t.href,"_blank").focus(),e.preventDefault(),e.stopPropagation())},setViewItem:function(e,t,n=!1){t=l(t);return n&&a[t]&&a[t].parentElement&&a[t].parentElement.removeChild(a[t]),a[t]&&a[t].parentElement&&a[t].parentElement.replaceChild(e,a[t]),a[t]=e,a[t]},getViewItem:function(e){return a[l(e)]||null},getAllViewItems:function(){return a},isActiveRow:function(e,t){return!!e.target&&!!(e=e.target.matches("[nwe]")?e.target:window.nwFindParent(e.target,"[nwe]"))&&e.classList.contains("active")},deactivateRow:function(e){return!!e.target&&!!(e=e.target.matches("[nwe]")?e.target:window.nwFindParent(e.target,"[nwe]"))&&e.classList.remove("active")}};window.nwTypes||(window.nwTypes={}),window.nwTypes.nwComponent=e})(),(()=>{let l=window.nwCreateHTML,o=window.nwTypes.nwComponent,i={onChange:()=>{},onCancel:()=>{}};function c(e,t){e=l("span",{class:"form-control"},e.join(", "));return o.setViewItem(e,t)}function s(e,t){e.preventDefault(),e.stopPropagation(),t.item=(""+this.value.trim()).split("\n");e=c(t.item,t);window.nwEditor.index.change(t.item,t,e),i.onChange.apply(this,[t.item])}window.nwTypes||(window.nwTypes={}),window.nwTypes.nwFileUris={$name:"nwFileUris",read:function(e){var{rule:t,field:n,item:r}=e,a=l("div",{class:"value "+(t.disabled?"disabled":"")}),t=l("label",{class:"form-label"},t.title);return a.appendChild(t),a.appendChild(c(r[n],e)),a},edit:function(t,e,n,r){if(o.isActiveRow(e,t))return o.deactivateRow(e),{$element:null};console.log(e.target,e),i.onChange=n,i.onCancel=r,e=t.item.join("\n");let a=l("textarea",{class:"form-control",rows:9},e,!0);return t.rule?.disabled&&a.setAttribute("disabled",!0),a.addEventListener("keyup",function(e){e.metaKey&&"Enter"===e.key&&s.apply(this,[e,t])}),a.addEventListener("blur",function(e){s.apply(this,[e,t])}),{$element:a,onAttach:()=>a.focus()}}}})(),(()=>{let o=window.nwCreateHTML,i=window.nwL,c={onChange:()=>{},onCancel:()=>{}},s=!1,r,t={$name:"a",read:e=>{var{field:e,item:t}=e,e=t[e],n=o("i",{class:"nwi-external-link me-2"}),r=o("span",{},t.text||e);return o("a",{href:e,target:"_blank",class:t.class||"btn btn-xs btn-outline-success"},[n,r],!0)}};function d(e,t,n=!1){n&&(e.preventDefault(),e.stopPropagation()),"INPUT"===this.tagName&&(t.item=this.value.trim(),a(t.item),window.nwEditor.index.change(t.item,t,r)),s=!n,c.onChange.apply(this,[t.item,s])}function a(e){e=t.read({field:"href",item:{href:e}});return r instanceof HTMLElement&&r.parentElement.replaceChild(e,r),r=e}var e={$name:"nwUrl",read:(e,t=0)=>{var{field:e,item:n,rule:r}=e,n=""+n[e],e=(console.log(n),r.title||r.name),r=o("label",{class:"form-label"},e),e=o("div",{class:"value"});return e.appendChild(r),e.appendChild(a(n)),e.addEventListener("click",window.nwTypes.nwComponent.allowLinksOnClick),e},edit:(e,t,n,r)=>{if(c.onChange=n,c.onCancel=r,!(s=!s))return!1;let a=function(e){var t=o("div",{class:"value"}),n="nwUrl-"+e.field,r=o("label",{class:"form-label mb-3",for:n},e.rule?.title),r=(t.appendChild(r),o("input",{class:"form-control",type:"url",name:e.field,id:n,value:e.item,placeholder:e.rule?.placeholder||""}));e.rule?.disabled&&r.setAttribute("disabled",!0);(n=o("div",{class:"input-group"})).appendChild(r),r=o("span",{},i("Accept btn",e.data?.$l||{}));return(e=o("button",{class:"btn btn-outline-success",type:"button"})).appendChild(r),n.appendChild(e),t.appendChild(n),t}(e);var l;return n=a,l=e,n.addEventListener("keydown",function(e){e.target&&"INPUT"===e.target.tagName&&"Enter"===e.key&&d.apply(e.target,[e,l,!0])}),n.addEventListener("keyup",function(e){e.target&&"INPUT"===e.target.tagName&&"Enter"!==e.key&&d.apply(e.target,[e,l,!1])}),n.addEventListener("blur",function(e){e.target&&"INPUT"===e.target.tagName&&d.apply(e.target,[e,l,!0])}),n.addEventListener("click",function(e){e.target&&"BUTTON"===e.target.tagName&&d.apply(e.target,[e,l,!0])}),{$element:a,onAttach:()=>a.querySelector("input").focus()}}};window.nwTypes||(window.nwTypes={}),window.nwTypes.a=t,window.nwTypes.nwUrl=e})();